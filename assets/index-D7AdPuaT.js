(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&t(c)}).observe(document,{childList:!0,subtree:!0});function a(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function t(e){if(e.ep)return;e.ep=!0;const n=a(e);fetch(e.href,n)}})();let o=JSON.parse(localStorage.getItem("cart"))||[],s=JSON.parse(localStorage.getItem("products"))||[],l=o.reduce((r,i)=>r+i.price*i.quantity,0);const p="service_rni45ss",f="template_85ntlxx";document.addEventListener("DOMContentLoaded",()=>{d(),m()});function d(){const r=document.getElementById("product-list");r.innerHTML="",s.forEach(a=>{if(a.quantity>0){const t=document.createElement("div");t.classList.add("product"),t.innerHTML=`
                <img src="${a.image}" alt="${a.name}">
                <h3>${a.name}</h3>
                <p>Fiyat: ${a.price} TL</p>
                <p>Adet: ${a.quantity}</p>
                <button class="add-to-cart" data-name="${a.name}" data-price="${a.price}" data-quantity="${a.quantity}">Sepete Ekle</button>
            `,r.appendChild(t)}}),document.querySelectorAll(".add-to-cart").forEach(a=>{a.addEventListener("click",g)})}function g(r){const i=r.target.getAttribute("data-name"),a=parseFloat(r.target.getAttribute("data-price")),t=parseInt(r.target.getAttribute("data-quantity")),e=parseInt(prompt(`Kaç adet ${i} eklemek istersiniz? (Maksimum: ${t})`));if(isNaN(e)||e<=0){iziToast.error({title:"Hata",message:"Geçerli bir miktar girin."});return}if(e>t){iziToast.error({title:"Hata",message:"Stoktan fazla ürün ekleyemezsiniz."});return}const n=o.find(u=>u.name===i);n?n.quantity+=e:o.push({name:i,price:a,quantity:e}),l+=a*e,localStorage.setItem("cart",JSON.stringify(o));const c=s.find(u=>u.name===i);c.quantity-=e,localStorage.setItem("products",JSON.stringify(s)),d(),m(),iziToast.success({title:"Başarılı",message:`${e} adet ${i} sepete eklendi.`})}function m(){const r=document.getElementById("cart-items"),i=document.getElementById("total-price");r.innerHTML="",o.forEach(a=>{const t=document.createElement("li");t.textContent=`${a.name} - ${a.price} TL x ${a.quantity}`;const e=document.createElement("button");e.textContent="Kaldır",e.classList.add("remove-from-cart"),e.setAttribute("data-name",a.name),e.addEventListener("click",y),t.appendChild(e),r.appendChild(t)}),i.textContent=l}function y(r){const i=r.target.getAttribute("data-name");o=o.filter(t=>t.name!==i);const a=s.find(t=>t.name===i);if(a){const t=o.find(e=>e.name===i);t&&(a.quantity+=t.quantity)}localStorage.setItem("cart",JSON.stringify(o)),localStorage.setItem("products",JSON.stringify(s)),d(),m(),iziToast.success({title:"Başarılı",message:`${i} sepetinizden kaldırıldı.`})}document.getElementById("complete-order").addEventListener("click",function(){const r=prompt("Lütfen e-posta adresinizi girin:");r?(S(r),o.forEach(i=>{const a=s.find(t=>t.name===i.name);if(a&&a.quantity<=0){const t=s.indexOf(a);t!==-1&&s.splice(t,1)}}),o=[],localStorage.removeItem("cart"),l=0,localStorage.setItem("products",JSON.stringify(s)),d(),m(),iziToast.success({title:"Başarılı",message:"Siparişiniz başarıyla tamamlandı."})):iziToast.error({title:"Hata",message:"E-posta adresi girmediniz."})});function S(r){const a=`
        Sipariş Detayları:
        ${o.map(t=>`${t.name} - ${t.quantity} x ${t.price} TL`).join(`
`)}
        
        Toplam: ${l} TL
    `;emailjs.send(p,f,{email:r,message:a}).then(t=>{console.log("E-posta gönderildi: ",t),iziToast.success({title:"Başarılı",message:"Sipariş detaylarınız e-posta ile gönderildi."})},t=>{console.error("E-posta gönderilemedi: ",t),iziToast.error({title:"Hata",message:"E-posta gönderilirken bir hata oluştu."})})}
